{%- macro custom_get_field_type(field) -%}
    {%- set base_type -%}
        {%- if 'x-cast-to' not in field.extras -%}
            {{ field.type_hint }}
        {%- elif field.extras['x-cast-to'] == 'string' -%}
            str
        {%- elif field.extras['x-cast-to'] in ('int', 'int32', 'int64') -%}
            int
        {%- elif field.extras['x-cast-to'] == 'float' -%}
            float
        {%- elif field.extras['x-cast-to'] in ('boolean', 'bool') -%}
            bool
        {%- else -%}
            ERROR
        {%- endif -%}
    {%- endset -%}
    {%- if not field.required and 'x-cast-to' in field.extras -%}
        {{ base_type | trim }} | None
    {%- else -%}
        {{ base_type | trim }}
    {%- endif -%}
{%- endmacro -%}

{% if base_class != "BaseModel" and "," not in base_class and not fields and not config -%}

{# if this is just going to be `class Foo(Bar): pass`, then might as well just make Foo
an alias for Bar: every pydantic model class consumes considerable memory. #}
{{ class_name }} = {{ base_class }}

{% else -%}

{% for decorator in decorators -%}
{{ decorator }}
{% endfor -%}
class {{ class_name }}({{ base_class }}):{% if comment is defined %}  # {{ comment }}{% endif %}
{%- if description %}
    """{{ description | wordwrap(65) | replace('\n', '\n    ') }}"""
{%- endif %}
{%- if not fields and not description %}
    pass
{%- endif %}
{%- if config %}
{%- filter indent(4) %}
{% include 'ConfigDict.jinja2' %}
{%- endfilter %}
{%- endif %}
{%- for field in fields -%}
    {%- if not field.annotated and field.field %}
    {{ field.name }}: {{ custom_get_field_type(field) }} = {{ field.field }}
    {%- else %}
    {%- if field.annotated %}
    {{ field.name }}: {{ field.annotated }}
    {%- else %}
    {{ field.name }}: {{ custom_get_field_type(field) }}
    {%- endif %}
    {%- if not (field.required or (field.represented_default == 'None' and field.strip_default_none)) or field.data_type.is_optional
            %} = {{ field.represented_default }}
    {%- endif -%}
    {%- endif %}
    {%- if field.docstring %}
    """{{ field.docstring | wordwrap(65) | replace('\n', '\n    ') }}"""
    {%- endif %}
{%- for method in methods -%}
    {{ method }}
{%- endfor -%}
{%- endfor -%}

{%- endif %}
